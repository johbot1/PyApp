<!DOCTYPE html>
<html>
<head>
    <title>D&D Name Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div id="name-display"></div>

    <div id="generation-options">
        <div id="race-gender-container">
            <div id="race-selection">
                <h2>Select Race(s):</h2>
                <label><input type="checkbox" name="race" value="human"> Human</label><br>
                <label><input type="checkbox" name="race" value="elf"> Elf</label><br>
                <label><input type="checkbox" name="race" value="dwarf"> Dwarf</label><br>
            </div>

            <div id="gender-selection">
                <h2>Select Gender:</h2>
                <label><input type="radio" name="gender" value="male"> Male</label><br>
                <label><input type="radio" name="gender" value="female"> Female</label><br>
            </div>
        </div>

        <button id="generate-button">Generate Name</button>
    </div>

    <script>
        // Event listener for the "Generate Name" button
        document.getElementById('generate-button').addEventListener('click', function() {
            // Gets the selected races from checkboxes
            const races = Array.from(document.querySelectorAll('input[name="race"]:checked')).map(el => el.value);
            // Gets the selected gender from radio buttons
            const gender = document.querySelector('input[name="gender"]:checked').value;

            // Send a POST request to the Flask API
            fetch('/generate_name', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ races: races, gender: gender })
            })
            .then(response => response.json()) // Parse the JSON response
            .then(data => {
                // Check if both first and last names are present in the response
                if (data.firstName && data.lastName) {
                    // Display the generated name in the name-display div
                    document.getElementById('name-display').textContent = data.firstName + " " + data.lastName;
                } else {
                    // Display an error message if names are missing
                    document.getElementById('name-display').textContent = data.error;
                }
            })
            .catch(error => {
                // Handle any errors that occur during the fetch request
                console.error('Error:', error);
                document.getElementById('name-display').textContent = 'An error occurred.';
            });
        });
    </script>
</body>
</html>